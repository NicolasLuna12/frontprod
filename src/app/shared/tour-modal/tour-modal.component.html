<!-- Modal específico de página (más prominente) -->
<div *ngIf="showPageModal && currentPageStep" class="tour-overlay page-modal">
  <div class="tour-modal page-tour-modal">
    <div class="tour-header">
      <h3 class="tour-title">
        <i class="fas fa-map-marker-alt me-2"></i>
        {{ currentPageStep.title }}
      </h3>
      <button class="close-btn" (click)="closePageModal()" aria-label="Cerrar modal de página">
        <i class="fas fa-times"></i>
      </button>
    </div>
    
    <div class="tour-body">
      <p class="tour-description">{{ currentPageStep.content }}</p>
      
      <div class="tour-features">
        <h4><i class="fas fa-list-ul me-2"></i>Funcionalidades de esta sección:</h4>
        <div class="features-grid">
          <div *ngFor="let feature of currentPageStep.features; let i = index" 
               class="feature-item"
               [class.demo-restriction]="feature.includes('NOTA DEMO')"
               [class.version-complete]="feature.includes('VERSIÓN COMPLETA')">
            <div class="feature-number">{{ i + 1 }}</div>
            <div class="feature-content">
              <i class="fas feature-icon" 
                 [class.fa-check-circle]="!feature.includes('NOTA DEMO') && !feature.includes('VERSIÓN COMPLETA')"
                 [class.fa-exclamation-triangle]="feature.includes('NOTA DEMO')"
                 [class.fa-star]="feature.includes('VERSIÓN COMPLETA')"></i>
              <span>{{ feature }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="tour-footer">
      <div class="tour-progress">
        <span class="step-counter">Sección {{ currentStepNumber }} de {{ totalSteps }}</span>
        <div class="progress-bar">
          <div class="progress-fill" [style.width.%]="(currentStepNumber / totalSteps) * 100"></div>
        </div>
      </div>
      
      <div class="tour-buttons">
        <button class="btn btn-secondary" (click)="skipTourFromModal()">
          <i class="fas fa-times me-2"></i>Terminar Tour
        </button>
        
        <button class="btn btn-outline" 
                (click)="previousPageFromModal()" 
                [disabled]="currentStepNumber === 1">
          <i class="fas fa-arrow-left me-2"></i>Sección Anterior
        </button>
        
        <button class="btn btn-success" (click)="closePageModal()">
          <i class="fas fa-eye me-2"></i>Explorar Esta Sección
        </button>
        
        <button class="btn btn-primary" (click)="nextPageFromModal()">
          <span *ngIf="currentStepNumber < totalSteps">
            Siguiente Sección <i class="fas fa-arrow-right ms-2"></i>
          </span>
          <span *ngIf="currentStepNumber === totalSteps">
            Finalizar Tour <i class="fas fa-check ms-2"></i>
          </span>
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal global de navegación (más discreto) -->
<div *ngIf="isActive && !showPageModal" class="tour-overlay global-modal">
  <div class="tour-modal global-tour-modal">
    <div class="tour-header">
      <h3 class="tour-title">{{ currentStep?.title }}</h3>
      <button class="close-btn" (click)="closeTour()" aria-label="Cerrar tour">
        <i class="fas fa-times"></i>
      </button>
    </div>
    
    <div class="tour-body">
      <p class="tour-description">{{ currentStep?.content }}</p>
      
      <div class="tour-features" *ngIf="currentStep && currentStep.features && currentStep.features.length > 0">
        <h4>Funcionalidades disponibles:</h4>
        <ul>
          <li *ngFor="let feature of currentStep.features" 
              [class.demo-restriction]="feature.includes('NOTA DEMO')">
            <i class="fas" 
               [class.fa-check-circle]="!feature.includes('NOTA DEMO')" 
               [class.fa-info-circle]="feature.includes('NOTA DEMO')"></i>
            {{ feature }}
          </li>
        </ul>
      </div>
    </div>
    
    <div class="tour-footer">
      <div class="tour-progress">
        <span class="step-counter">Paso {{ currentStepNumber }} de {{ totalSteps }}</span>
        <div class="progress-bar">
          <div class="progress-fill" [style.width.%]="(currentStepNumber / totalSteps) * 100"></div>
        </div>
      </div>
      
      <div class="tour-buttons">
        <button class="btn btn-secondary" (click)="skipTour()">
          Omitir Tour
        </button>
        
        <button class="btn btn-outline" 
                (click)="previousStep()" 
                [disabled]="currentStepNumber === 1">
          <i class="fas fa-arrow-left"></i> Anterior
        </button>
        
        <button class="btn btn-primary" (click)="nextStep()">
          <span *ngIf="currentStepNumber < totalSteps">
            Siguiente <i class="fas fa-arrow-right"></i>
          </span>
          <span *ngIf="currentStepNumber === totalSteps">
            Finalizar <i class="fas fa-check"></i>
          </span>
        </button>
      </div>
    </div>
  </div>
</div>
