<app-carrito></app-carrito>
<button *ngIf="estaAutenticado && esAdmin" class="btn-switch-vista" [class.vista-usuario]="vistaUsuario" (click)="setVistaUsuario(!vistaUsuario)">
  <span class="icono">
    <i class="bi" [ngClass]="vistaUsuario ? 'bi-person-fill' : 'bi-shield-lock-fill'"></i>
  </span>
  <span class="texto">{{ vistaUsuario ? 'Vista usuario' : 'Vista admin' }}</span>
</button>
<app-nav [vistaUsuario]="vistaUsuario"></app-nav>
<router-outlet></router-outlet>
<app-footer></app-footer>

<!-- Chatbot flotante en el filo abajo a la derecha -->
<app-chat-bot></app-chat-bot>

<!-- Botón flotante de WhatsApp -->
<a [href]="contactoService.getUrlWhatsApp('Hola, necesito ayuda con mi pedido')" 
   class="whatsapp-float"
   [ngClass]="{'whatsapp-float-home': isHome}"
   target="_blank" 
   rel="noopener noreferrer">
  <i class="bi bi-whatsapp"></i>
  <span class="whatsapp-tooltip">Chatea con nosotros</span>
</a>

<!-- Selector de idioma -->
<app-language-selector></app-language-selector>


<!-- Pasos del tour guiado para usuario demo -->
<ng-template joyrideStep="homeStep" title="¡Bienvenido a ISPC Food!" stepPosition="bottom">
  <b>Funciones en esta página:</b>
  <ul>
    <li>Ver novedades y promociones destacadas.</li>
    <li>Acceder rápidamente a la carta, carrito, perfil y contacto.</li>
    <li>Ver comentarios de otros usuarios.</li>
    <li>Utilizar el chatbot de ayuda y el acceso directo a WhatsApp.</li>
    <li>Cambiar el idioma de la aplicación.</li>
  </ul>
</ng-template>

<ng-template joyrideStep="cartaStep" title="Carta de productos" stepPosition="bottom">
  <b>Funciones en esta página:</b>
  <ul>
    <li>Explorar todos los productos disponibles.</li>
    <li>Ver detalles y precios de cada producto.</li>
    <li>Agregar productos al carrito.</li>
    <li>Filtrar productos por nombre.</li>
    <li>Ver imágenes y descripciones de cada plato.</li>
  </ul>
</ng-template>

<ng-template joyrideStep="carritoStep" title="Carrito de compras" stepPosition="bottom">
  <b>Funciones en esta página:</b>
  <ul>
    <li>Ver los productos seleccionados y sus cantidades.</li>
    <li>Modificar cantidades o eliminar productos del carrito.</li>
    <li>Ver el subtotal y el total de la compra.</li>
    <li>Ingresar o modificar la dirección de entrega.</li>
    <li>Proceder al pago y finalizar la compra.</li>
  </ul>
</ng-template>

<ng-template joyrideStep="perfilStep" title="Mi Perfil" stepPosition="bottom">
  <b>Funciones en esta página:</b>
  <ul>
    <li>Ver y editar tus datos personales (nombre, apellido, teléfono, dirección).</li>
    <li>Cambiar la foto de perfil.</li>
    <li>Refrescar los datos del perfil.</li>
    <li>Eliminar tu cuenta (solo simulado para el usuario demo).</li>
    <li><b>Nota:</b> Como usuario demo, puedes ver el campo de email pero no modificarlo realmente.</li>
  </ul>
</ng-template>


